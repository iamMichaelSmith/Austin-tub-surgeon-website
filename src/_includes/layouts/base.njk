<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {# Basic SEO #}
  <title>{{ title }} | {{ site.name }}</title>
  <meta name="description" content="{{ description | default(site.tagline) }}" />
  <link rel="canonical" href="{{ site.url }}{{ page.url }}" />

  {# Open Graph / Social #}
  <meta property="og:title" content="{{ title }} | {{ site.name }}" />
  <meta property="og:description" content="{{ description | default(site.tagline) }}" />
  <meta property="og:type" content="{% if page.url and page.url.startsWith('/blogs/') and page.url != '/blogs/' %}article{% else %}website{% endif %}" />
  <meta property="og:url" content="{{ site.url }}{{ page.url }}" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ title }} | {{ site.name }}" />
  <meta name="twitter:description" content="{{ description | default(site.tagline) }}" />

  <link rel="stylesheet" href="/assets/css/style.css" />

  {# Local business schema #}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "{{ site.name }}",
    "url": "{{ site.url }}",
    "telephone": "{{ site.phone }}",
    "email": "{{ site.email }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ site.address.street }}",
      "addressLocality": "{{ site.address.city }}",
      "addressRegion": "{{ site.address.state }}",
      "postalCode": "{{ site.address.zip }}",
      "addressCountry": "US"
    },
    "areaServed": ["Austin", "Round Rock", "Georgetown", "Pflugerville", "Cedar Park", "Hutto", "Leander"],
    "openingHours": ["Mo-Fr 08:30-16:00", "Sa 10:00-16:00"],
    "priceRange": "$$"
  }
  </script>

  {# BlogPosting schema for individual blog posts #}
  {% if page.url and page.url.startsWith('/blogs/') and page.url != '/blogs/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ title }}",
    "description": "{{ description | default(site.tagline) }}",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ site.url }}{{ page.url }}"
    },
    "author": {
      "@type": "Organization",
      "name": "{{ site.name }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.name }}"
    },
    "datePublished": "{{ page.date | sitemapDate }}",
    "dateModified": "{{ page.date | sitemapDate }}"
  }
  </script>
  {% endif %}
</head>
<body class="page-{{ pageKey }}">
  {% include "partials/header.njk" %}
  <main>
    {{ content | safe }}
  </main>
  {% include "partials/footer.njk" %}

  <script src="/assets/js/site.js"></script>
</body>
</html>
